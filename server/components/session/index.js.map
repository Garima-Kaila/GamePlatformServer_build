{"version":3,"sources":["../../../../server/components/session/index.js"],"names":[],"mappings":";;;;AAIA,YAAY,CAAC;;;;;;;;;;;wBACS,WAAW;;IAArB,IAAI;;sBACQ,WAAW;;IAAvB,MAAM;;AAEX,SAAS,UAAU,CAAC,GAAG,EAAE,GAAG,EAAC,IAAI,EAAC;AACrC,UAAM,CAAC,GAAG,CAAC,CAAC,EAAC,SAAS,EAAC,YAAY,EAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AAC7C,QAAI,MAAM,GAAG,AAAC,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,GAAG,GAAI,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC;AAC3E,QAAG,CAAC,MAAM,IAAI,GAAG,CAAC,IAAI,CAAC,MAAM,KAAK,MAAM,EAAC;AACrC,cAAM,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,OAAO,GAAE,IAAI,CAAC,EAAE,EAAE,CAAC;KACnE,MAAI;;KAEJ;AACD,OAAG,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACzB,OAAG,CAAC,OAAO,CAAC,IAAI,GAAG,MAAM,CAAC;;AAE1B,UAAM,CAAC,GAAG,CAAC,CAAC,EAAC,SAAS,EAAC,YAAY,EAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACrD,QAAI,EAAE,CAAC;CACV;;AACM,SAAS,oBAAoB,CAAC,GAAG,EAAE,GAAG,EAAC,IAAI,EAAC;AAC/C,UAAM,CAAC,GAAG,CAAC,CAAC,EAAC,SAAS,EAAC,sBAAsB,CAAC,CAAC;;AAE/C,QAAI,EAAE,CAAC;CACV;;AACM,SAAS,qBAAqB,CAAC,GAAG,EAAE,GAAG,EAAC,IAAI,EAAC;AAChD,UAAM,CAAC,GAAG,CAAC,CAAC,EAAC,SAAS,EAAC,uBAAuB,CAAC,CAAC;;AAEhD,QAAI,EAAE,CAAC;CACV","file":"index.js","sourcesContent":["/**\n * Session manager\n */\n\n'use strict';\nimport * as uuid from 'node-uuid' ;\nimport * as logger from '../logger';\n\nexport function getSession(req, res,next){\n    logger.log(0,\"Session\",\"getSession\",req.user);\n     var userId = (req.user && req.user._id) ? req.user._id : req.session.user;\n    if(!userId && req.Game.action === \"init\"){\n        userId = req.Game.userId ? req.Game.userId : \"DEMO-\"+ uuid.v1();\n    }else{\n        // log execption \"Invalid Request\"\n    }\n    req.Game.userId = userId;\n    req.session.user = userId;\n    \n    logger.log(1,\"Session\",\"getSession\",req.Game.userId);\n    next();\n}\nexport function managePreGameRequest(req, res,next){\n    logger.log(0,\"Session\",\"managePreGameRequest\");\n    \n    next();\n}\nexport function managePostGameRequest(req, res,next){\n    logger.log(0,\"Session\",\"managePostGameRequest\");\n    \n    next();\n}"]}