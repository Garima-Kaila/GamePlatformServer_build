{"version":3,"sources":["../../../server/config/seed.js"],"names":[],"mappings":";;;;;AAKA,YAAY,CAAC;;;;2BACM,eAAe;;;;kCAIhB,0BAA0B;;;;mDACjB,2CAA2C;;;;gCACrD,wBAAwB;;;;gCAGxB,wBAAwB;;;;AAPzC,IAAI,aAAa,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;;AAS/C,gCAAM,IAAI,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE,CACzB,IAAI,CAAC,YAAM;AACV,kCAAM,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;CACpC,CAAC,CAAC;;AAEL,8BAAK,IAAI,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE,CACxB,IAAI,CAAC,YAAM;AACV,gCAAK,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;CAClC,CAAC,CAAC;;AAGL,iDAAe,IAAI,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE,CAClC,IAAI,CAAC,YAAM;AACV,mDAAe,MAAM,CAAC,aAAa,CAAC,cAAc,EAAC,UAAS,GAAG,EAAC,GAAG,EAAC;AAChE,QAAG,GAAG,EAAC,EAEN,MAAI;AACG,uDAAe,IAAI,CAAC,EAAE,CAAC,CACtB,IAAI,CAAC,UAAU,GAAG,EAAE;AACjB,eAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACrB,YAAI,MAAM,GAAG,EAAE,CAAC;AAChB,aAAI,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAE,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,EAAC;AACpC,cAAI,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;AACpB,cAAG,IAAI,CAAC,MAAM,EAAC;AACX,kBAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;WAClC;SACJ;AACG,cAAM,CAAC,MAAM,GAAG,MAAM,CAAC;AACvB,eAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;OAEtC,CAAC,SACI,CAAC,OAAO,CAAC,GAAG,CAAC,kCAAkC,CAAC,CAAC,CAAC;KAC/D;GAEJ,CAAC,CAAC;CAEJ,CAAC,CAAC;;AAEL,8BAAK,IAAI,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE,CACxB,IAAI,CAAC,YAAM;AACV,gCAAK,WAAW,CAAC,aAAa,CAAC,KAAK,CAAC,CACpC,IAAI,CAAC,YAAM;AACV,WAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;GAC1C,CAAC,CAAC;CACJ,CAAC,CAAC","file":"seed.js","sourcesContent":["/**\n * Populate DB with sample data on server start\n * to disable, edit config/environment/index.js, and set `seedDB: false`\n */\n\n'use strict';\nimport config from './environment';\n\nvar defaultConfig = require('./defaultConfig');\n\nimport Thing from '../api/thing/thing.model';\nimport Configurations from '../api/configurations/configuration.model';\nimport Game from '../api/game/game.model';\n\n\nimport User from '../api/user/user.model';\n\nThing.find({}).removeAsync()\n  .then(() => {\n    Thing.create(defaultConfig.things);\n  });\n\nGame.find({}).removeAsync()\n  .then(() => {\n    Game.create(defaultConfig.games);\n  });\n\n\nConfigurations.find({}).removeAsync()\n  .then(() => {\n    Configurations.create(defaultConfig.configurations,function(err,res){\n        if(err){\n            \n        }else{\n                Configurations.find({})\n                .then(function (res) {\n                    console.log(res);\n                var config = {};\n                for(var idx = 0; idx< res.length; idx++){\n                    var conf = res[idx];\n                    if(conf.active){\n                        config[conf.name] = conf.value;\n                    }\n                }\n                    GLOBAL.config = config;\n                    console.log(\"Config Initialized!\");\n                    \n                })\n                .catch(console.log(\"Error in fetching configurations\"));\n        }\n        \n    });\n\n  });\n\nUser.find({}).removeAsync()\n  .then(() => {\n    User.createAsync(defaultConfig.users)\n    .then(() => {\n      console.log('finished populating users');\n    });\n  });\n"]}